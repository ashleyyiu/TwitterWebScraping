<!DOCTYPE html>
<link rel = "stylesheet" type="text/css" href="style.css">
<html>
<head>
	<script src="jquery-311.js"></script>
	<style type="text/css">
		body, html {
			margin: 0;
			height: 100%;
			overflow-y: hidden;
		}
		#map {
			height: 100%;
			width: 100%;
		}
	</style>
</head>
<body>

	<div id="scrolltext"></div>

	<div id = "tweetContent">

		<script type="text/javascript">
		var allTweets = "Live Time Twitter Feed\n";

    	function readContent() {
			$.getJSON('tweet.json', function(json) {
				allTweets += json.text;
				document.getElementById("scrolltext").innerHTML = allTweets;
			});
		}

		var intervalID = window.setInterval(readContent, 1000);

		</script>
	</div>

	<div id="map"></div>
	<script type="text/javascript">
		var map, heatmap;

		function initMap() {
			map = new google.maps.Map(document.getElementById('map'), {
				zoom: 12,
				center: {lat: 38.9072, lng: -77.0369}
			});

			heatmap = new google.maps.visualization.HeatmapLayer({
				data: getPoints(),
				map: map
			});
		}

		function getPoints() {
			return [
				new google.maps.LatLng(37.782551, -122.445368),
				new google.maps.LatLng(37.782745, -122.444586),
				new google.maps.LatLng(37.782842, -122.443688),
			];
    	}

	</script>
	<script type="text/javascript">
		function filter(raw) {
			function findStringsInString(string, strings) {
				for (var i = 0; i < strings.length; i++) {
					if (strings[i].search(string) != -1) return true;
				}
				return false;
			}
			var data = JSON.parse(raw);
			var list = [];
			for (var i = 0; i < data.length; i++) {
				if (findStringsInString(data[i].text, ["shooting", "stabbing", "bombing", "burglary", "robbery"])) {
					list.push(data[i]);
				}
			}
			return list;
		}
	</script>

	<script async defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDnpMx0yYUoIAQAM0KwcI_24wU-d0sAtfI&libraries=visualization&callback=initMap">
	</script>
</iframe>
</body>
</html>
